{"title":"问题6：字符串压缩","date":"2020-07-18T10:38:05.000Z","date_formatted":{"ll":"Jul 18, 2020","L":"07/18/2020","MM-DD":"07-18"},"link":"2020/07/18/问题6：字符串压缩","tags":["数组与字符串"],"categories":["算法练习"],"updated":"2020-07-18T17:47:25.989Z","content":"<h2 id=\"题目描述\">题目描述<a title=\"#题目描述\" href=\"#题目描述\"></a></h2>\n<p><font size=4>  利用字符重复出现的次数，编写一种方法，实现基本的字符串压缩功能。比如，字符串aabcccccaaa会变为a2b1c5a3。若“压缩”后的字符串没有变短，则返回原先的字符串。你可以假设字符串中只包含大小写英文字母（a至z）。</font></p>\n<h2 id=\"个人思路\">个人思路<a title=\"#个人思路\" href=\"#个人思路\"></a></h2>\n<p>  涉及字符串拼接，利用stringbuilder，别忘了引用System.Text,记得处理边界情况，尤其是最后一位字符。</p>\n<h2 id=\"个人解答\">个人解答<a title=\"#个人解答\" href=\"#个人解答\"></a></h2>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">static string CompressBad(string s)&#123;</span><br><span class=\"line\">    if(s.Length &#x3D;&#x3D; 1)&#123;</span><br><span class=\"line\">        return s;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    StringBuilder sb &#x3D; new StringBuilder(10);</span><br><span class=\"line\">    char before &#x3D; s[0];</span><br><span class=\"line\">    int count &#x3D; 1;</span><br><span class=\"line\">    for(int i &#x3D; 1; i &lt; s.Length; i++)&#123;</span><br><span class=\"line\">        if(s[i] &#x3D;&#x3D; before)&#123;</span><br><span class=\"line\">            count ++;</span><br><span class=\"line\">            if(i &#x3D;&#x3D; s.Length - 1)&#123;</span><br><span class=\"line\">                sb.Append(before);</span><br><span class=\"line\">                sb.Append(count);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else &#123;</span><br><span class=\"line\">            sb.Append(before);</span><br><span class=\"line\">            sb.Append(count);</span><br><span class=\"line\">            count &#x3D; 1;</span><br><span class=\"line\">            if(i &#x3D;&#x3D; s.Length - 1)&#123;</span><br><span class=\"line\">                sb.Append(s[i]);</span><br><span class=\"line\">                sb.Append(1);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return sb.ToString().Length &gt; s.Length ? s : sb.ToString();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"题目解析\">题目解析<a title=\"#题目解析\" href=\"#题目解析\"></a></h2>\n<p>  乍一看，编写这个方法似乎易如反掌，实则有点儿复杂。我们会迭代访问字符串，将字符复制至新字符串，并数出重复字符。在遍历过程中的每一步，只需检查当前字符与下一个字符是否一致。如果不一致，则将压缩后的版本写入到结果中。<br>\n  但是直接使用字符串拼接的话，时间复杂度为O(n2)。<br>\n  可以使用StringBuilder优化部分性能。</p>\n<h2 id=\"标准解答\">标准解答<a title=\"#标准解答\" href=\"#标准解答\"></a></h2>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F;和我的解答基本相同，写的更漂亮</span><br><span class=\"line\">    static string CompressBad(string s)&#123;</span><br><span class=\"line\">    if(s.Length &#x3D;&#x3D; 1)&#123;</span><br><span class=\"line\">        return s;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    StringBuilder sb &#x3D; new StringBuilder(10);</span><br><span class=\"line\">    int count &#x3D; 0;</span><br><span class=\"line\">    for(int i &#x3D; 0; i &lt; s.Length; i++)&#123;</span><br><span class=\"line\">        count++;</span><br><span class=\"line\">        if(i + 1 &gt;&#x3D; s.Length || s[i+1] !&#x3D; s[i])&#123;</span><br><span class=\"line\">            sb.Append(s[i]);</span><br><span class=\"line\">            sb.Append(count);</span><br><span class=\"line\">            count &#x3D; 0;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    return sb.ToString().Length &gt; s.Length ? s : sb.ToString();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"反思\">反思<a title=\"#反思\" href=\"#反思\"></a></h2>\n<p>  写出不优美的代码一定要看看还能不能再优化，有时候就是一个下标，一个if的问题。</p>\n<h2 id=\"提示：#92，#110\">提示：#92，#110<a title=\"#提示：#92，#110\" href=\"#提示：#92，#110\"></a></h2>\n<p>  -先做容易的事。压缩字符串，然后再比较长度。<br>\n  -注意不要把字符串重复连接在一起。这会非常低效。</p>\n","prev":{"title":"问题精析：HDR和ToneMapping","link":"2020/07/19/问题精析：HDR和ToneMapping"},"next":{"title":"问题精析：PBR实现ByOpenGL（带纹理）","link":"2020/07/18/问题精析：PBR实现ByOpenGL（带纹理）"},"plink":"http://Ssssshinji.github.io/2020/07/18/问题6：字符串压缩/","toc":[{"id":"题目描述","title":"题目描述","index":"1"},{"id":"个人思路","title":"个人思路","index":"2"},{"id":"个人解答","title":"个人解答","index":"3"},{"id":"题目解析","title":"题目解析","index":"4"},{"id":"标准解答","title":"标准解答","index":"5"},{"id":"反思","title":"反思","index":"6"},{"id":"提示：#92，#110","title":"提示：#92，#110","index":"7"}]}