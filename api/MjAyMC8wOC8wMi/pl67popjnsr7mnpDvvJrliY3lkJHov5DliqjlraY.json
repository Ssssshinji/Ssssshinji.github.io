{"title":"问题精析：前向运动学","date":"2020-08-01T18:16:37.000Z","date_formatted":{"ll":"Aug 2, 2020","L":"08/02/2020","MM-DD":"08-02"},"link":"2020/08/02/问题精析：前向运动学","tags":["计算机图形学"],"categories":["问题精析"],"updated":"2020-08-01T18:40:48.429Z","content":"<script type=\"text/javascript\" async src=\"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML\"></script>\n<h2 id=\"概念\">概念<a title=\"#概念\" href=\"#概念\"></a></h2>\n<p>  通过指定所有骨骼的变换来确定关节体的姿势称为前向运动学。</p>\n<h2 id=\"数学基础\">数学基础<a title=\"#数学基础\" href=\"#数学基础\"></a></h2>\n<p>  在骨骼层级及坐标空间变换一文中，可知为了方便操作顶点的移动，我们通常将整体物体空间中的坐标转移到骨骼物体空间中。依靠以下矩阵：<br>\n$$<br>\nM_{i,d}^{-1} = M_{i,p}^{-1}M_{i-1,d}^{-1}<br>\n$$<br>\n  而为了渲染的需要，在传入渲染管线前，我们又需要将骨骼空间坐标转移到世界空间（World Space）。</p>\n<img src=\"/2020/08/02/%E9%97%AE%E9%A2%98%E7%B2%BE%E6%9E%90%EF%BC%9A%E5%89%8D%E5%90%91%E8%BF%90%E5%8A%A8%E5%AD%A6/1.png\" class=\"\">\n<p>  如果要渲染前臂骨骼空间下的（2，0）坐标，需要以下几个矩阵。<br>\n  1. 本地变换矩阵，将旋转过的前臂骨骼空间变换回标准姿势。（这里注意，标准姿势下的前臂骨骼空间到旋转后的前臂骨骼空间中的旋转矩阵才是能够将旋转过的前臂骨骼空间变换回标准姿势的矩阵！！！）上图即为旋转-90的矩阵！<br>\n  2.前述的toParent矩阵。<br>\n  3.父级骨骼的toWorld矩阵，一般是整个物体空间到世界空间的变换矩阵与toDefault矩阵的乘积，或是直接的世界变换矩阵。</p>\n<img src=\"/2020/08/02/%E9%97%AE%E9%A2%98%E7%B2%BE%E6%9E%90%EF%BC%9A%E5%89%8D%E5%90%91%E8%BF%90%E5%8A%A8%E5%AD%A6/2.png\" class=\"\">\n<h2 id=\"整体步骤\">整体步骤<a title=\"#整体步骤\" href=\"#整体步骤\"></a></h2>\n<p>  用vd表示在整体物体空间中，默认姿势下的顶点坐标，通过\\(M_{i,d}\\)变换到骨骼物体空间，再通过\\(M_{i,w}}\\)变换到世界坐标中。将骨骼中的一个顶点做变换到最终渲染，需要的整个矩阵变换如下：<br>\n$$<br>\nv_w - M_{i,w}M_{i,d}^{-1}v_d<br>\n$$</p>\n<h2 id=\"参考资料\">参考资料<a title=\"#参考资料\" href=\"#参考资料\"></a></h2>\n<p>   1. <a href=\"\">JungHyun Han - 3D Graphics for Game Programming-CRC Press (2011)</a></p>\n","prev":{"title":"问题4：化栈为列","link":"2020/08/03/问题4：化栈为列"},"next":{"title":"问题4：幂集","link":"2020/07/31/问题4：幂集"},"plink":"http://Ssssshinji.github.io/2020/08/02/问题精析：前向运动学/","toc":[{"id":"概念","title":"概念","index":"1"},{"id":"数学基础","title":"数学基础","index":"2"},{"id":"整体步骤","title":"整体步骤","index":"3"},{"id":"参考资料","title":"参考资料","index":"4"}]}